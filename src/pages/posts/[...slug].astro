---
import PostLayout from '@layouts/PostLayout.astro';
import CodeSnippet from '@components/markdown/CodeSnippet.astro'

import { getCollection } from 'astro:content';  // eslint-disable-line import/no-unresolved

import '@styles/code.css';

export async function getStaticPaths() {
  const articles = await getCollection('articles');
  const poems = await getCollection('poems');
  return [...articles, ...poems].map((entry: any) => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

---
<PostLayout frontmatter={entry.data}>
  <Content components={{CodeSnippet}}/>
</PostLayout>
